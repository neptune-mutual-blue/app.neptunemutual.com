import { Container } from "@/components/UI/atoms/container";
import { InputWithTrailingButton } from "@/components/UI/atoms/input/with-trailing-button";
import Head from "next/head";
import { TotalLiquidityChart } from "@/components/UI/molecules/TotalLiquidityChart";
import { useCountdown } from "@/lib/countdown/useCountdown";
import DateLib from "@/lib/date/DateLib";
import { Radio } from "@/components/UI/atoms/radio";
import { useState } from "react";
import { classNames } from "@/utils/classnames";

const getTime = () => {
  return DateLib.unix().toString();
};
const target = DateLib.unix() + 60 * 60 * 44;
const formatCount = (n) => String(n).padStart(2, "0");

export default function Components() {
  const { hours, minutes, seconds } = useCountdown({
    target,
    getTime,
  });

  const [votingType, setVotingType] = useState("incident-occurred");

  const handleRadioChange = (e) => {
    setVotingType(e.target.value);
  };

  return (
    <main>
      <Head>
        <title>Neptune Mutual</title>
        <meta name="description" content="Generated by create next app" />
      </Head>
      <Container className="px-8 py-6">
        <div className="max-w-md">
          <InputWithTrailingButton
            buttonProps={{
              children: "Max",
              onClick: () => console.log("@todo: implement this handler"),
            }}
            unit="NPM-USDC LP"
            inputProps={{
              id: "test-input-id",
              placeholder: "Enter Amount",
            }}
          />
        </div>

        <div className="max-w-md mt-3">
          <h3 className="text-h3 font-sora font-bold">Cast Your Vote</h3>
          <div className="flex flex-col mt-6 mb-8 max-w-lg">
            <div
              className={classNames(
                "p-5 rounded-lg my-2",
                votingType === "incident-occurred"
                  ? "border-2 border-4e7dd9"
                  : "border border-B0C4DB"
              )}
            >
              <Radio
                label={"Incident Occurred"}
                id="incident-radio"
                value="incident-occurred"
                name="vote-radio"
                checked={votingType === "incident-occurred"}
                onChange={handleRadioChange}
              />
            </div>
            <div
              className={classNames(
                "p-5 rounded-lg my-2",
                votingType === "false-reporting"
                  ? "border-2 border-4e7dd9"
                  : "border border-B0C4DB"
              )}
            >
              <Radio
                label={"False Reporting"}
                id="false-radio"
                name="vote-radio"
                value="false-reporting"
                checked={votingType === "false-reporting"}
                onChange={handleRadioChange}
              />
            </div>
          </div>
        </div>

        <br />
        <br />

        <div className="flex text-h2 justify-center">
          <div>{formatCount(hours)}:</div>
          <div>{formatCount(minutes)}:</div>
          <div>{formatCount(seconds)}</div>
        </div>

        <br />
        <br />

        <div style={{ width: "800px", height: "500px" }}>
          <TotalLiquidityChart />
        </div>
      </Container>
    </main>
  );
}
